{"scope":"PUBLIC","source":"\n\n  DS2_OPTIONS LOGICALEXPR = STANDARD;\n  DS2_OPTIONS SCOND = WARNING;\n  DS2_OPTIONS MISSING_NOTE;\n\n                                                                                   \n                     \n  package autoAuctionDec1_0  / inline;\n    dcl package logger logr_ppn('App.tk.SID.Ppn');\n    dcl package logger logr_perf('App.tk.SID.Perf');\n    dcl double timer_start;\n    dcl double elapsed_time;\n    dcl double total_timer_start;\n    dcl double total_elapsed_time;\n\n    dcl package \"autoAuctionDec_Linearu32Regressionu32u40Pipelineu321u41\" \"autoAuctionDec_Linearu32Regressionu32u40Pipelineu321u41_hdl\"();\n    dcl package \"autoAuctionDec_autoAuctionMake_1_0\" \"autoAuctionDec_autoAuctionMake_1_0_hdl\"();\n    dcl package \"autoAuctionDec_autoAuction_1_0\" \"autoAuctionDec_autoAuction_1_0_hdl\"();\n    dcl package \"autoAuctionDec_californiaOverride_1_0\" \"autoAuctionDec_californiaOverride_1_0_hdl\"();\n\n     method init();\n\n     end;\n\n    method execute_internal(\n       in_out double \"BlueBookPrice\"\n      ,in_out double \"CurrentBid\"\n      ,in_out varchar \"Make\"\n      ,in_out double \"Miles\"\n      ,in_out varchar \"Model\"\n      ,in_out double \"OriginalInvoice\"\n      ,in_out double \"OriginalMSRP\"\n      ,in_out varchar \"VIN\"\n      ,in_out double \"Year\"\n      ,in_out varchar \"state\"\n      ,in_out double \"Bid\"\n      ,in_out double \"EM_PREDICTION\"\n      ,in_out double \"P_BlueBookPrice\"\n      ,in_out varchar \"bidCommand\"\n      ,in_out double \"callOffice\"\n\n      ,in_out integer \"_filter_\"\n\n    );\n        dcl integer dg_filter_;\n\n       dcl integer _masRC;\n\n        total_timer_start = datetime();\n\n        timer_start = datetime();\n        \"autoAuctionDec_Linearu32Regressionu32u40Pipelineu321u41_hdl\".score(\"Miles\", \"EM_PREDICTION\", \"P_BlueBookPrice\");\n\n        elapsed_time = datetime() - timer_start;\n        logr_perf.log( 'd', 'Package Name: autoAuctionDec1_0, Node Name: Linear Regression (Pipeline 1), Node ID: b75331cd-f57f-479c-8de2-afabb4813d9f, NODE DURATION: ' .. elapsed_time);\n\n              ;\n\n                             \n        if ( \"state\" eq 'PA' )\n         then do;\n\n             timer_start = datetime();\n             \"autoAuctionDec_autoAuctionMake_1_0_hdl\".execute(\"Bid\", \"bidCommand\", \"BlueBookPrice\", \"callOffice\", \"CurrentBid\", \"Make\", \"Miles\", \"Model\", \"OriginalInvoice\", \"OriginalMSRP\", \"state\", \"VIN\", \"Year\");\n\n             elapsed_time = datetime() - timer_start;\n             logr_perf.log( 'd', 'Package Name: autoAuctionDec1_0, Node Name: autoAuctionMake, Node ID: 23edd00c-5b27-4726-935a-a6b076b60018, NODE DURATION: ' .. elapsed_time);\n\n        end;\n\n        else do;\n\n             timer_start = datetime();\n             \"autoAuctionDec_autoAuction_1_0_hdl\".execute(\"Bid\", \"EM_PREDICTION\", \"callOffice\", \"CurrentBid\", \"Make\", \"Miles\", \"Model\", \"OriginalInvoice\", \"OriginalMSRP\", \"state\", \"VIN\", \"Year\");\n\n             elapsed_time = datetime() - timer_start;\n             logr_perf.log( 'd', 'Package Name: autoAuctionDec1_0, Node Name: autoAuction, Node ID: 45da8736-1ef3-421a-90af-9e826b0f7a4f, NODE DURATION: ' .. elapsed_time);\n\n        end;\n\n                           \n\n        timer_start = datetime();\n        \"autoAuctionDec_californiaOverride_1_0_hdl\".execute(\"Bid\", \"bidCommand\", \"state\");\n\n        elapsed_time = datetime() - timer_start;\n        logr_perf.log( 'd', 'Package Name: autoAuctionDec1_0, Node Name: californiaOverride, Node ID: 135a42da-45a6-4e4f-b7c5-f2c50e684712, NODE DURATION: ' .. elapsed_time);\n\n        \"end\":                                            \n\n        total_elapsed_time = datetime() - total_timer_start;\n        logr_perf.log( 'd', 'Package Name: autoAuctionDec1_0, TOTAL DURATION: ' .. total_elapsed_time);\n\n     end;\n\n    method execute(\n       double \"BlueBookPrice_\"\n      ,double \"CurrentBid_\"\n      ,varchar(20) \"Make_\"\n      ,double \"Miles_\"\n      ,varchar(20) \"Model_\"\n      ,double \"OriginalInvoice_\"\n      ,double \"OriginalMSRP_\"\n      ,varchar(17) \"VIN_\"\n      ,double \"Year_\"\n      ,varchar(2) \"state_\"\n      ,in_out double \"Bid\"\n      ,in_out double \"BlueBookPrice\"\n      ,in_out double \"CurrentBid\"\n      ,in_out double \"EM_PREDICTION\"\n      ,in_out varchar \"Make\"\n      ,in_out double \"Miles\"\n      ,in_out varchar \"Model\"\n      ,in_out double \"OriginalInvoice\"\n      ,in_out double \"OriginalMSRP\"\n      ,in_out double \"P_BlueBookPrice\"\n      ,in_out varchar \"VIN\"\n      ,in_out double \"Year\"\n      ,in_out varchar \"bidCommand\"\n      ,in_out double \"callOffice\"\n      ,in_out varchar \"state\"\n);\n\n      dcl integer _filter_;\n\n          \"BlueBookPrice\" = \"BlueBookPrice_\";\n      \"CurrentBid\" = \"CurrentBid_\";\n      \"Make\" = \"Make_\";\n      \"Miles\" = \"Miles_\";\n      \"Model\" = \"Model_\";\n      \"OriginalInvoice\" = \"OriginalInvoice_\";\n      \"OriginalMSRP\" = \"OriginalMSRP_\";\n      \"VIN\" = \"VIN_\";\n      \"Year\" = \"Year_\";\n      \"state\" = \"state_\";\n\n          execute_internal(\n          \"BlueBookPrice\"\n         ,\"CurrentBid\"\n         ,\"Make\"\n         ,\"Miles\"\n         ,\"Model\"\n         ,\"OriginalInvoice\"\n         ,\"OriginalMSRP\"\n         ,\"VIN\"\n         ,\"Year\"\n         ,\"state\"\n         ,\"Bid\"\n         ,\"EM_PREDICTION\"\n         ,\"P_BlueBookPrice\"\n         ,\"bidCommand\"\n         ,\"callOffice\"\n      ,\"_filter_\"\n      );\n\n    end;\n\n                       \n       endpackage;","properties":[{"name":"sourceURI","value":"/decisions/flows/27090e76-8e7f-4e2c-9ede-02c862ee8853/revisions/cd4adb7f-5f5f-4a2e-9206-776c8297e85c"}],"submodules":[{"name":"autoAuctionDec_Linearu32Regressionu32u40Pipelineu321u41","description":"","source":"\n\nds2_options scond=none;\n                                                                                                 \n                                                                                                                                                                                                                                                                                 \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \npackage \"autoAuctionDec_Linearu32Regressionu32u40Pipelineu321u41\" / overwrite=yes;\n   dcl double \"Miles\";\n   dcl double \"P_BlueBookPrice\" having label n'Predicted: BlueBookPrice';\n   dcl double \"EM_PREDICTION\";\n   varlist allvars [_all_];\n\n   method _DZMQ9L6RHK6P98COBXCJVDV1J();\n      dcl double _J_;\n      dcl double _I_;\n      dcl double _TEMP_;\n      dcl double _LINP_;\n      dcl double _BADVAL_;\n      dcl nchar(6) _MILES_;\n      dcl double _BETA_77138452_0_[14];\n      dcl double _XROW_77138452_0_[14];\n\n      _BETA_77138452_0_:=(11999.9999999999, 23000, 68000, 16000, 28000, -6999.99999999998,\n      -3999.99999999998, 0, 0, 1.6608936448392E-11, -3999.99999999998, 0, 0,\n      0);\n      _BADVAL_ = 0.0;\n      _LINP_ = 0.0;\n      _TEMP_ = 0.0;\n      _I_ = 0.0;\n      _J_ = 0.0;\n      _MILES_ = LEFT(TRIM(put(MILES, BEST6.)));\n      do _I_ = 1.0 to 14.0;\n      _XROW_77138452_0_[_I_] = 0.0;\n      end;\n      _XROW_77138452_0_[1.0] = 1.0;\n      _TEMP_ = 1.0;\n      select (_MILES_);\n      when ('4000') _XROW_77138452_0_[2.0] = _TEMP_;\n      when ('5000') _XROW_77138452_0_[3.0] = _TEMP_;\n      when ('20000') _XROW_77138452_0_[4.0] = _TEMP_;\n      when ('40000') _XROW_77138452_0_[5.0] = _TEMP_;\n      when ('50000') _XROW_77138452_0_[6.0] = _TEMP_;\n      when ('59000') _XROW_77138452_0_[7.0] = _TEMP_;\n      when ('68000') _XROW_77138452_0_[8.0] = _TEMP_;\n      when ('70000') _XROW_77138452_0_[9.0] = _TEMP_;\n      when ('80000') _XROW_77138452_0_[10.0] = _TEMP_;\n      when ('82000') _XROW_77138452_0_[11.0] = _TEMP_;\n      when ('90000') _XROW_77138452_0_[12.0] = _TEMP_;\n      when ('100000') _XROW_77138452_0_[13.0] = _TEMP_;\n      when ('270000') _XROW_77138452_0_[14.0] = _TEMP_;\n      otherwise do ;\n      _BADVAL_ = 1.0;\n      goto SKIP_77138452_0;\n      end;\n      end;\n      do _I_ = 1.0 to 14.0;\n      _LINP_ + _XROW_77138452_0_[_I_] * _BETA_77138452_0_[_I_];\n      end;\n      SKIP_77138452_0: if (_BADVAL_ = 0.0) \u0026 ^MISSING(_LINP_) then do ;\n      P_BLUEBOOKPRICE = _LINP_;\n      end;\n      else do ;\n      _LINP_ = .;\n      P_BLUEBOOKPRICE = .;\n      end;\n      if \"P_BLUEBOOKPRICE\" = . then \"P_BLUEBOOKPRICE\" = 22142.857143;\n      EM_PREDICTION = \"P_BLUEBOOKPRICE\";\n\n   end;\n\n   method score(\n      double \"Miles\",\n      IN_OUT double \"EM_PREDICTION\",\n      IN_OUT double \"P_BlueBookPrice\"\n   );\n      this.\"Miles\"= \"Miles\";\n\n      _DZMQ9L6RHK6P98COBXCJVDV1J();\n\n      \"EM_PREDICTION\"= this.\"EM_PREDICTION\";\n      \"P_BlueBookPrice\"= this.\"P_BlueBookPrice\";\n   end;\n\n   method predictedscore(\n      double \"Miles\",\n      IN_OUT double \"EM_PREDICTION\",\n      IN_OUT double \"P_BlueBookPrice\"\n   );\n      this.\"Miles\"= \"Miles\";\n\n      _DZMQ9L6RHK6P98COBXCJVDV1J();\n\n      \"EM_PREDICTION\"= this.\"EM_PREDICTION\";\n      \"P_BlueBookPrice\"= this.\"P_BlueBookPrice\";\n   end;\n\n                                                                            \n endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"autoAuctionDec_autoAuctionMake_1_0","description":"","source":"\n\nds2_options scond=WARNING;\n                                                                                    \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\nDS2_OPTIONS MISSING_NOTE;\n\n                                                                                                                                                                                                                                                                                            \n  package \"autoAuctionDec_autoAuctionMake_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n      dcl varchar(512)   lookup_value;\n\n      dcl varchar(256)   lookup_key;\n      dcl package datagrid lookup_0 ('lookup_0');                                                \n      dcl package datagrid lookup_1 ('lookup_1');                                                \n\n                                                                                 \n      forward DataGrid_create;\n      forward DataGrid_FilteredGet;\n      method \"autoAuctionDec_autoAuctionMake_1_0\"();\n\n                                                        \n            DataGrid_create(lookup_0, '[{\"metadata\":[{\"key\":\"string\"},{\"value\":\"string\"}]}, {\"data\":[\n[\"0\",\"Do NOT bid on this car!\"],[\"1\",\"Bid on the car!\"]]}]');\n\n                                                        \n            DataGrid_create(lookup_1, '[{\"metadata\":[{\"key\":\"string\"},{\"value\":\"string\"}]}, {\"data\":[\n[\"Buick\",\"Buick\"],[\"Scion\",\"Scion\"]]}]');\n\n      end;\n\n      method getLookupValue() returns varchar(512);\n        return lookup_value;\n      end;\n\n      method doLookupFind(varchar(256) lookupKey, varchar(100) lookupName) returns int;\n        dcl integer rc;\n        rc = 1;\n        lookup_value = '';\n        if ( not missing(lookupKey) ) then do;\n\n                lookup_key = strip(lookupkey);\n\n                select(lookupName);\n                  when('$LJS6EWUUOMJGPVB347TSMI7QXBA_K.') lookup_value = DataGrid_FilteredGet(lookup_0, 'value', 'key', 'eq', lookup_key);\n                  when('$LYRS5R6VLUJB7DIVDMJWWD7RBUE_K.') lookup_value = DataGrid_FilteredGet(lookup_1, 'value', 'key', 'eq', lookup_key);\n                end;\n\n                if ( not missing(lookup_value) ) then do;\n                  rc = 0;\n                end;\n        end;\n\n        return rc;\n      end;\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\nmethod DataGrid_create(package datagrid aGrid,\nvarchar(10485760) JSONTableString)\nreturns int;\n    dcl int rowCnt;    \n    rowCnt = aGrid.deserialize(JSONTableString);\n    if (rowCnt = 0) then\n        rowCnt = aGrid.rowCount();\n    return rowCnt;    \nend;\n\nmethod DataGrid_FilteredGet(package datagrid aGrid,\nvarchar(255) srcCol,\nvarchar(255) cmpCol,\nchar(2)      cmpOp,\nvarchar(32767) cmpVal)\nreturns varchar;\n    dcl varchar(32767) colVal;\n    colVal = aGrid.filteredGet(cmpCol, cmpOp, cmpVal, srcCol);\n    return colVal;\nend;\n\nmethod DataGrid_FilteredGet(package datagrid aGrid,\nvarchar(255) srcCol,\nvarchar(255) cmpCol,\nchar(2)      cmpOp,\nvarchar(32767) cmpVal,\nint start_row,\nint end_row)\nreturns varchar;\n    dcl varchar(32767) colVal;\n    colVal = aGrid.filteredGet(cmpCol, cmpOp, cmpVal, srcCol,start_row,end_row);\n    return colVal;\nend;\n\n    method execute( in_out double \"Bid\",in_out varchar \"bidCommand\",in_out double \"BlueBookPrice\",in_out double \"callOffice\",in_out double \"CurrentBid\",in_out varchar \"Make\",in_out double \"Miles\",in_out varchar \"Model\",in_out double \"OriginalInvoice\",in_out double \"OriginalMSRP\",in_out varchar \"state\",in_out varchar \"VIN\",in_out double \"Year\");\n\n;\n         if (0 = doLookupFind(\"Make\",'$LYRS5R6VLUJB7DIVDMJWWD7RBUE_K.')) then do;\n         \"Bid\" = 0 ;\n\ngoto \"end_daef7833-d036-45cf-ae76-c1e508d02f34\";end;\n         else do;\n         \"Bid\" = 1 ;\n\n         end;\n\n         \"end_daef7833-d036-45cf-ae76-c1e508d02f34\":\n\n         if(doLookupFind(Bid,'$LJS6EWUUOMJGPVB347TSMI7QXBA_K.') in (0, 2)) then;\"bidCommand\" = getLookupValue();;\n\n      rule_end:                                    \n    end;\n\n                                                       \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"autoAuctionDec_autoAuction_1_0","description":"","source":"\nds2_options scond=WARNING;\n                                                                                \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\nDS2_OPTIONS MISSING_NOTE;\n\n                                                                                                                                                                                                                                                                                    \n  package \"autoAuctionDec_autoAuction_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\n    method execute( in_out double \"Bid\",in_out double \"BlueBookPrice\",in_out double \"callOffice\",in_out double \"CurrentBid\",in_out varchar \"Make\",in_out double \"Miles\",in_out varchar \"Model\",in_out double \"OriginalInvoice\",in_out double \"OriginalMSRP\",in_out varchar \"state\",in_out varchar \"VIN\",in_out double \"Year\");\n\n;\n         \"Bid\" = 0 ;\n\n         \"callOffice\" = 0 ;\n\n         if (\"CurrentBid\" \u003c \"BlueBookPrice\") AND (\"Miles\" \u003c 50000.0) then do;\n         \"Bid\" = 1 ;\n\ngoto \"end_b25c1f7e-1d07-4058-894e-aa310005d08b\";\nend;\n         if (CurrentBid \u003c 1.2*BlueBookPrice) AND (\"Miles\" \u003c 10000.0) then do;\n         \"Bid\" = 1 ;\n\n         end;\n\n         \"end_b25c1f7e-1d07-4058-894e-aa310005d08b\":\n\n      rule_end:                                    \n    end;\n\n                                                   \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"autoAuctionDec_californiaOverride_1_0","description":"","source":"\nds2_options scond=WARNING;\n                                                                                                                                                                                                                                                                                               \n                                                                                 \npackage \"autoAuctionDec_californiaOverride_1_0\" /inline;\n   method execute(in_out double Bid,\n                  in_out varchar bidCommand,\n                  in_out varchar state);\n    if state = 'CA' then do;\n       Bid = 1;\n       bidCommand = 'Buy anything from California!';\n   end;\n   end;\n                                                          \n endpackage;","attributes":{"keyValue":""},"language":"DS2"}]}